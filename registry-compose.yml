# Make a local registry that will act as cache between many hosts.
# Main objective is to save time when re-building docker hosts with Vagrant.
#
# See https://docs.docker.com/registry/deploying/


registry:
  restart: always
  image: registry:2
  ports:
    - 5000:5000
  environment:
    REGISTRY_HTTP_TLS_CERTIFICATE: /certs/domain.crt
    REGISTRY_HTTP_TLS_KEY: /certs/domain.key
    REGISTRY_STORAGE_FILESYSTEM_ROOTDIRECTORY: /var/lib/registry
  volumes:
    - /registry-data:/var/lib/registry
    - /path/certs:/certs
    